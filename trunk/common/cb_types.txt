# INSTRUCTIONS:
# -------------
# is_triggered_only - Triggered from within the code or by event effects. DO NOT REMOVE THE STOCK ONES.
# mutual - The CB effects will also be used by the defender in peace treaties
# months - The number of months this CB will be valid. Only works for triggered CBs.
# prerequisites - A condition that automatically activates a CB. Does not work for triggered CBs. 'THIS' scope is the target country.
# allowed_regions - If 'po_demand_regions' is on, badboy_factor applies to these provinces. 'THIS' scope is us.
# on_add - effect triggered when war goal added (triggering country's scope)
# on_completion - effect triggered when goal is fulfilled
# is_valid_join - trigger used instead of is_valid to check if we can join a faction at war with this goal
# "handles_peace = yes" = this wargoal does not make peace with the defeated nation

# NOTE: The order in which the peace options are listed is the order in which the AI will normally prioritize them in peace treaties

# TRIGGERED - Triggered from within the code or by event effects
# --------------------------------------------------------------

# Order that CBs are executed in a peace treaty
peace_order = { 
	mexico_revolution
	second_balkans
	second_balkans_bulg
	axis_romania
	allies_bulgaria
	german_france
	axis_russia
	axis_england
	allies_germany
	allies_austria
	allies_ottoman
	civil_war_1
	civil_war_2
	puppet
	aquire_all_cores
	conquer
	#install_communism 
	liberate_as_democracy 
	#liberate_as_communist 
	install_democracy 
}

mexico_revolution = {
	sprite_index = 4
	is_triggered_only = yes
	
	is_valid = {
		THIS = { 
			tag = MXR
			government_in_exile = no
		}
		tag = MEX
		MEX = { exists = yes }
		MXR = { exists = yes }
		government_in_exile = no
	}

	#is_civil_war = yes #this is a civil war

	on_completion = { 
		MXR = { country_event = 190011 }
	}
	
	war_name = WAR_CONQUEST_NAME
}

second_balkans = {
	sprite_index = 1
	is_triggered_only = yes

	always = yes
	
	is_valid = {
		THIS = { 
			SER = { has_country_flag = has_serb_alliance }
			NOT = { BUL = { has_country_flag = lose_balkans } }
			NOT = { BUL = { has_country_flag = first_balkan_surrender } }
		}
		tag = BUL
		exists = yes
		government_in_exile = no
	}

	handles_peace = yes
	on_completion = { 
		BUL = { country_event = 100136 }
	}
	#po_annex = yes
	
	war_name = WAR_CONQUEST_NAME
}

second_balkans_bulg = {
	sprite_index = 1
	is_triggered_only = yes

	always = yes
	
	is_valid = {
		THIS = { 
			SER = { has_country_flag = has_serb_alliance }
			NOT = { BUL = { has_country_flag = lose_balkans } }
			NOT = { BUL = { has_country_flag = win_balkans } }
			NOT = { BUL = { has_country_flag = first_balkan_surrender } }
		}
		tag = BUL
		exists = yes
		government_in_exile = no
	}

	handles_peace = yes
	on_completion = { 
		BUL = { country_event = 100360 }
	}
	#po_annex = yes
	
	war_name = WAR_CONQUEST_NAME
}

axis_romania = {
	sprite_index = 1
	is_triggered_only = yes

	always = yes
	
	is_valid = {
		THIS = {  #Axis against rom
			faction = axis
			GER = { has_country_flag = germany_mobilize }
		}
		tag = ROM
		ROM = { faction = allies }
		exists = yes
		government_in_exile = no
	}

	handles_peace = yes
	on_completion = { 
		ROM = { country_event = 190012 }
	}
	#po_annex = yes
	
	war_name = WAR_CONQUEST_NAME
}

allies_bulgaria = {
	sprite_index = 3
	is_triggered_only = yes

	always = yes
	
	is_valid = {
		THIS = {  #allies against bul
			faction = allies
			GER = { has_country_flag = germany_mobilize }
		}
		tag = BUL
		BUL = { faction = axis }
		exists = yes
		government_in_exile = no
	}

	handles_peace = yes
	on_completion = { 
		BUL = { country_event = 190013 }
	}
	#po_annex = yes
	
	war_name = WAR_CONQUEST_NAME
}
german_france = {
	sprite_index = 1
	is_triggered_only = yes

	always = yes
	
	is_valid = {
		this = { 
			tag = GER
		}
		tag = FRA
		FRA = { 
			NOT = { has_country_flag = fr_signs_peace }
		}
		NOT = {
			# has no "conquer" from anyone
			# has no "puppet" from anyone
			has_cb = { type = conquer }
			has_cb = { type = puppet }
		}
	}

	handles_peace = yes
	threat = 10
	on_completion = { 
		country_event = 190010 #Fall of France
	}
}

axis_russia = {
	sprite_index = 1
	is_triggered_only = yes

	always = yes
	
	is_valid = {
		THIS = {  #Axis against Russia
			faction = axis
			GER = { has_country_flag = germany_mobilize }
			NOT = { RUS = { has_country_flag = war_over } }
		}
		tag = RUS
		exists = yes
		government_in_exile = no
	}

	handles_peace = yes
	on_completion = { 
		RUS = { country_event = 999950 }
	}
	#po_annex = yes
	
	war_name = WAR_CONQUEST_NAME
}

axis_england = {
	sprite_index = 1
	is_triggered_only = yes

	always = yes
	
	is_valid = {
		THIS = {  #Axis against Russia
			faction = axis
			GER = { has_country_flag = germany_mobilize }
			NOT = { ENG = { has_country_flag = war_over } }
		}
		tag = ENG
		exists = yes
		government_in_exile = no
	}

	handles_peace = yes
	on_completion = { 
		GER = { country_event = 190005 } #ENGLAND
	}
	#po_annex = yes
	
	war_name = WAR_CONQUEST_NAME
}

allies_germany = {
	sprite_index = 3
	is_triggered_only = yes

	always = yes
	
	is_valid = {
		THIS = {  #Allies against Ger
			faction = allies
			GER = { has_country_flag = germany_mobilize }
			NOT = { GER = { has_country_flag = war_over } }
		}
		tag = GER
		exists = yes
		government_in_exile = no
	}

	handles_peace = yes
	on_completion = { 
		GER = { country_event = 190002 }
	}
	#po_annex = yes
	
	war_name = WAR_CONQUEST_NAME
}

allies_austria = {
	sprite_index = 3
	is_triggered_only = yes

	always = yes
	
	is_valid = {
		THIS = {  #Allies against Ger
			faction = allies
			GER = { has_country_flag = germany_mobilize }
			NOT = { AUH = { has_country_flag = war_over } }
		}
		tag = AUH
		exists = yes
		government_in_exile = no
	}

	handles_peace = yes
	on_completion = { 
		AUH = { country_event = 190003 }
	}
	#po_annex = yes
	
	war_name = WAR_CONQUEST_NAME
}

allies_ottoman = {
	sprite_index = 3
	is_triggered_only = yes

	always = yes
	
	is_valid = {
		THIS = {  #Allies against Ger
			faction = allies
			GER = { has_country_flag = germany_mobilize }
			NOT = { TUR = { has_country_flag = war_over } }
		}
		tag = TUR
		exists = yes
		government_in_exile = no
	}

	handles_peace = yes
	on_completion = { 
		ENG = { country_event = 190004 }
	}
	#po_annex = yes
	
	war_name = WAR_CONQUEST_NAME
}

# Civil war
civil_war_1 = {
	sprite_index = 4
	is_triggered_only = yes
	
	is_valid = {
		THIS = { 
			tag = CHI
		}
		tag = QIN
		QIN = { exists = yes }
		CHI = { exists = yes }
		government_in_exile = no
	}

	#is_civil_war = yes #this is a civil war

	on_completion = { 
		CHI = { country_event = 100070 }
	}
	
	war_name = WAR_CONQUEST_NAME
}

civil_war_2 = {
	sprite_index = 4
	is_triggered_only = yes
	
	is_valid = {
		THIS = { 
			tag = QIN
		}
		tag = CHI
		QIN = { exists = yes }
		CHI = { exists = yes }
		government_in_exile = no
	}

	#is_civil_war = yes #this is a civil war
	
	on_completion = { 
		QIN = { country_event = 100073 }
	}
	
	war_name = WAR_CONQUEST_NAME
}

conquer = {
	sprite_index = 4
	is_triggered_only = yes

	always = yes
	
	is_valid = {
		exists = yes
		government_in_exile = no
	}
	on_add = { threat = { who = all value = 5 } }
	#on_completion = { threat = 5 }
	threat = 5
	po_annex = yes
	
	war_name = WAR_CONQUEST_NAME
}

# lebensraum!
#aquire_territory = {
#	sprite_index = 5
#	is_triggered_only = yes
#
#	always = yes
#	
#	is_valid = {
#		this = { 
#			NOT = { faction = allies }
#		}
#	}
#	
#	allowed_regions = {
#		owned_by = FROM
#	}
#
#	po_demand_region = yes
#	
#	war_name = AQUIRE_TERRITORY_NAME
#}

aquire_all_cores = {
	sprite_index = 1
	is_triggered_only = yes

	always = yes
	
	is_valid = {
		this = { 
			exists = yes
			government_in_exile = no
		}
	}
	
	allowed_province = {
		is_core = THIS
	}

	po_demand_provinces = yes
	
	war_name = AQUIRE_CORE_NAME
}

liberate_as_democracy = {
	sprite_index = 3
	is_triggered_only = yes

	always = no
	
	is_valid = {
		this = { 
			faction = allies 
		}
		
		# non allies only
		not = { ideology = social_conservative }
		not = { ideology = market_liberal }
		not = { ideology = social_democrat }
	}
	
	po_change_government = yes
	
	war_name = WAR_LIBERATE_DEMOCRACY
}

install_democracy = {
	sprite_index = 7
	is_triggered_only = yes

	always = yes
	
	is_valid = {
		this = { 
			faction = allies 
		}
		
		# non allies only.
		not = { ideology = social_conservative }
		not = { ideology = market_liberal }
		not = { ideology = social_democrat }
	}
	
	po_install_government = yes
	
	war_name = WAR_INSTALL_DEMOCRACY
}

puppet = {
	sprite_index = 6
	is_triggered_only = yes

	always = yes
	
	is_valid = {
			THIS = { is_subject = no }
		}

	po_puppet = yes
	
	on_completion = { 
		FROM = { any_owned = { limit = { is_core = THIS } secede_province = THIS } } 
	}
	threat = 10
	
	war_name = WAR_VASSAL_NAME
}